/*
 * SPDX-License-Identifier: AGPL-3.0-only
 */
/* -------------------------------------------------------------------------- */
/*                            Window Minimize Animation                       */
/* -------------------------------------------------------------------------- */

/* 
   Genie Effect Simulation v9 - CPU Optimized
   
   - Performance: Uses only 2D transforms (scale, translate, skew).
   - Compatibility: Avoids 3D perspective and filters for non-GPU systems.
   - Funnel Effect: Simulated via non-uniform scale and skew.
*/

@keyframes genie-minimize-v9 {
    0% {
        transform: translate(0, 0) scale(1) skewX(0deg);
        opacity: 1;
    }

    25% {
        /* Anticipation: Slight swell and start of narrowing */
        transform: translate(calc(var(--genie-travel-x) * 0.1), calc(var(--genie-travel-y) * 0.1)) scale(0.98, 0.95) skewX(1deg);
        opacity: 1;
    }

    50% {
        /* The "Squeeze": Funnel shape via width squash and skew */
        transform: translate(calc(var(--genie-travel-x) * 0.45), calc(var(--genie-travel-y) * 0.45)) scale(0.5, 0.8) skewX(3deg);
        opacity: 0.8;
    }

    75% {
        /* Nearing target: Heavy narrowness */
        transform: translate(calc(var(--genie-travel-x) * 0.8), calc(var(--genie-travel-y) * 0.75)) scale(0.2, 0.4) skewX(5deg);
        opacity: 0.5;
    }

    100% {
        /* Vanished into icon */
        transform: translate(var(--genie-travel-x), var(--genie-travel-y)) scale(0, 0) skewX(10deg);
        opacity: 0;
    }
}

@keyframes genie-maximize-v9 {
    0% {
        transform: translate(var(--genie-travel-x), var(--genie-travel-y)) scale(0, 0) skewX(10deg);
        opacity: 0;
    }

    100% {
        transform: translate(0, 0) scale(1) skewX(0deg);
        opacity: 1;
    }
}

.genie-minimizing {
    /* Smooth liquid timing */
    animation: genie-minimize-v9 0.6s cubic-bezier(0.42, 0, 0.58, 1) forwards;
    transform-origin: bottom center;
    will-change: transform, opacity;
}

.genie-maximizing {
    animation: genie-maximize-v9 0.5s cubic-bezier(0.42, 0, 0.58, 1) forwards;
    transform-origin: bottom center;
}